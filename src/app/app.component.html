<!-- Use @if() to ensure only one view renders at a time -->
@if (viewMode === 'login') {
  <!-- Show login page without sidebar and header -->
  <div class="login-view">
    <router-outlet></router-outlet>
  </div>
} @else {
  <!-- Show main app layout with sidebar and header for authenticated users -->
  <div class="app-layout" [class.sidebar-collapsed]="sidebarCollapsed">
    <app-sidebar [collapsed]="sidebarCollapsed" (toggle)="toggleSidebar()"></app-sidebar>
    <div class="main-section">
      <app-topbar (openPatientQueue)="openPatientQueue($event)"></app-topbar>
      <main class="main-content">
        <router-outlet></router-outlet>
      </main>
    </div>
    
    <!-- Backdrop for right sidebar -->
    <div 
      class="right-sidebar-backdrop" 
      [class.visible]="rightSidebarOpened"
      (click)="closeRightSidebar()"
    ></div>
    
    <app-right-sidebar 
      [opened]="rightSidebarOpened" 
      (closeSidebar)="closeRightSidebar()"
    ></app-right-sidebar>
  </div>
}
