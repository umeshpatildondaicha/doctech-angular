<div class="dashboard-container">
  <!-- Top Metrics Section -->
  <div class="metrics">
    <div class="card" *ngFor="let metric of metrics">
      <div class="card-heading">{{ metric.title }}</div>
      <div class="card-middle-content d-flex">
        {{ metric.value }}
        <div
          *ngIf="metric.increment"
          [ngClass]="{
            'increment-positive': metric.increment.startsWith('+'),
            'increment-negative': metric.increment.startsWith('-')
          }"
          class="increment"
        >
          <span class="icon-container">
            <i
              class="fa-solid"
              [ngClass]="{
                'fa-arrow-trend-up': metric.increment.startsWith('+'),
                'fa-arrow-trend-down': metric.increment.startsWith('-')
              }"
            ></i>
          </span>
          <span class="increment-text">
            {{ metric.increment }}
          </span>
        </div>
      </div>
      <div class="card-bottom-content">
        <p class="duration">{{ metric.subtext }}</p>
        <button class="button-class">See details</button>
      </div>
    </div>
  </div>

  <!-- Patient Visits Chart -->
  <div class="chart-container">
    <h4>Patient Visit</h4>
    <div>
      <highcharts-chart
        [Highcharts]="Highcharts"
        [options]="visitChartOptions"
        style="width: 100%; height: 300px; display: block"
      >
      </highcharts-chart>
    </div>
  </div>
  
  <!-- Appointments -->
  <!-- Appointments -->
  <div class="appointments">
    <div class="d-flex justify-content-between" >
    <h4>Upcoming Appointments</h4>
    <!-- Filters Section -->
    <div class="filters mb-4">
      <input
        type="text"
        placeholder="Search by name or symptoms..."
        class="filter-input"
        [(ngModel)]="searchQuery"
      />
    </div>
  </div>
    <!-- Grid Section -->
    <div class="custom-grid">
      <!-- Header Row -->
      <div class="grid-header">
        <div class="grid-cell">Patient Name</div>
        <div class="grid-cell">Visit Type</div>
        <div class="grid-cell">Symptoms</div>
        <div class="grid-cell">Status</div>
      </div>
      <!-- Filtered Rows -->
      <div
        *ngFor="let appointment of filteredAppointments()"
        class="grid-row"
      >
        <div class="grid-cell">{{ appointment.name }}</div>
        <div class="grid-cell">{{ appointment.visitType }}</div>
        <div class="grid-cell">{{ appointment.symptoms }}</div>
        <div class="grid-cell">
          <span
            class="status-badge"
            [ngClass]="{
              'status-confirmed': appointment.status === 'Confirmed',
              'status-pending': appointment.status === 'Pending',
              'status-cancelled': appointment.status === 'Cancelled'
            }"
          >
            {{ appointment.status }}
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Income Card Section -->
  <div class="chart-container">
    <div class="card-body">
      <!-- Card Heading -->
      <div class="card-title text-center mb-3">
        <h4>Income</h4>
      </div>
  
      <!-- Card Middle Content -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <!-- Filter Dropdown -->
        <div class="income-dropdown d-flex align-items-center">
          <label for="income-filter" class="me-2 fw-bold">Filter by:</label>
          <select
            id="income-filter"
            [(ngModel)]="incomeFilter"
            class="form-select form-select-sm w-auto"
          >
            <option value="7days">Last 7 Days</option>
            <option value="monthly">Monthly</option>
          </select>
        </div>
  
        <!-- Total Income -->
        <div class="total-income text-success fw-bold">
          <strong>Total Income:</strong> {{ totalIncome | currency }}
        </div>
      </div>
  
      <!-- Chart Section -->
      <div>
        <highcharts-chart
          [Highcharts]="Highcharts"
          [options]="incomeChartOptions"
          class="w-100"
          style="height: 300px"
        >
        </highcharts-chart>
      </div>
    </div>
  </div>

</div>
