<div class="admin-dashboard">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-left">
      <div class="welcome-section">
        <h1>Hospital Administration Dashboard</h1>
        <p class="welcome-text">Welcome back, {{ currentUser.name }}</p>
        <span class="last-login">Last login: {{ currentUser.lastLogin }}</span>
      </div>
    </div>
    
    <div class="header-right">
      <div class="header-actions">
        <app-button 
          [fontIcon]="'refresh'" 
          [color]="'accent'"
          (btnClick)="refreshDashboard()"
          class="refresh-btn"
          title="Refresh Dashboard">
        </app-button>
        
        <app-button 
          [fontIcon]="'notifications'" 
          [color]="'accent'"
          class="notifications-btn"
          title="Notifications">
        </app-button>
        
        <app-button 
          [fontIcon]="'settings'" 
          [color]="'accent'"
          (btnClick)="navigateToSettings()"
          class="settings-btn"
          title="Settings">
        </app-button>
      </div>
      
      <div class="user-avatar">
        <div class="avatar-placeholder">
          <app-icon [fontIcon]="'person'" [size]="20"></app-icon>
        </div>
        <div class="user-info">
          <span class="user-name">{{ currentUser.name }}</span>
          <span class="user-role">{{ currentUser.role }}</span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Navigation Tabs -->
  <div class="navigation-tabs">
    <div class="tabs-container">
      <button 
        class="tab-item"
        [class.active]="isOverviewTab()"
        (click)="setActiveTab('overview')">
        <app-icon [fontIcon]="'dashboard'" [size]="16"></app-icon>
        <span>Overview</span>
      </button>
      
      <button 
        class="tab-item"
        [class.active]="isStaffTab()"
        (click)="setActiveTab('staff')">
        <app-icon [fontIcon]="'groups'" [size]="16"></app-icon>
        <span>Staff Management</span>
      </button>
      
      <button 
        class="tab-item"
        [class.active]="isPatientsTab()"
        (click)="setActiveTab('patients')">
        <app-icon [fontIcon]="'folder_shared'" [size]="16"></app-icon>
        <span>Patient Records</span>
      </button>
      
      <button 
        class="tab-item"
        [class.active]="isBillingTab()"
        (click)="setActiveTab('billing')">
        <app-icon [fontIcon]="'account_balance'" [size]="16"></app-icon>
        <span>Billing & Finance</span>
      </button>
      
      <button 
        class="tab-item"
        [class.active]="isAnalyticsTab()"
        (click)="setActiveTab('analytics')">
        <app-icon [fontIcon]="'analytics'" [size]="16"></app-icon>
        <span>Analytics & Reports</span>
      </button>
    </div>
  </div>

  <!-- Tab Content -->
  <div class="tab-content">
    <!-- Overview Tab -->
    <div class="tab-panel" *ngIf="isOverviewTab()">
      <!-- Statistics Cards -->
      <div class="stats-section">
        <div class="stats-header">
          <h2>Hospital Overview</h2>
          <span class="stats-subtitle">Real-time hospital metrics and performance indicators</span>
        </div>
        
        <div class="stats-grid">
          <div 
            *ngFor="let stat of statsCards" 
            class="stat-card"
            [class.negative-trend]="stat.trend < 0">
            
            <div class="stat-icon" [style.background]="stat.color">
              <app-icon [fontIcon]="stat.icon" [size]="24"></app-icon>
            </div>
            
            <div class="stat-content">
              <div class="stat-header">
                <span class="stat-title">{{ stat.title }}</span>
                <div class="stat-trend" [class.negative]="stat.trend < 0">
                  <app-icon 
                    [fontIcon]="stat.trend >= 0 ? 'trending_up' : 'trending_down'" 
                    [size]="14">
                  </app-icon>
                  <span>{{ stat.trend > 0 ? '+' : '' }}{{ stat.trend }}%</span>
                </div>
              </div>
              
              <div class="stat-value">{{ stat.value }}</div>
              <div class="stat-description">{{ stat.description }}</div>
              <div class="stat-period">{{ stat.trendLabel }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Dashboard Content -->
  <div class="dashboard-content">
    <!-- Left Column -->
    <div class="content-left">
      <!-- Revenue Chart -->
      <div class="dashboard-card revenue-card">
        <div class="card-header">
          <div class="card-title">
            <app-icon [fontIcon]="'trending_up'" [size]="20"></app-icon>
            <span>Revenue Analytics</span>
          </div>
          <div class="card-actions">
            <span class="period-selector">Monthly View</span>
            <app-button [fontIcon]="'more_vert'" [color]="'accent'" class="card-menu"></app-button>
          </div>
        </div>
        
        <div class="card-content">
          @if(isBrowser) {
            <highcharts-chart
              [Highcharts]="Highcharts"
              [options]="revenueChartOptions"
              class="chart-container">
            </highcharts-chart>
          } @else {
            <div class="chart-placeholder">
              <app-icon [fontIcon]="'show_chart'" [size]="48"></app-icon>
              <span>Loading revenue chart...</span>
            </div>
          }
        </div>
      </div>

      <!-- Patient Flow Chart -->
      <div class="dashboard-card patient-flow-card">
        <div class="card-header">
          <div class="card-title">
            <app-icon [fontIcon]="'people'" [size]="20"></app-icon>
            <span>Weekly Patient Flow</span>
          </div>
          <div class="card-actions">
            <span class="period-selector">This Week</span>
          </div>
        </div>
        
        <div class="card-content">
          @if(isBrowser) {
            <highcharts-chart
              [Highcharts]="Highcharts"
              [options]="patientFlowChartOptions"
              class="chart-container">
            </highcharts-chart>
          } @else {
            <div class="chart-placeholder">
              <app-icon [fontIcon]="'bar_chart'" [size]="48"></app-icon>
              <span>Loading patient flow chart...</span>
            </div>
          }
        </div>
      </div>

      <!-- Financial Summary -->
      <div class="dashboard-card financial-card">
        <div class="card-header">
          <div class="card-title">
            <app-icon [fontIcon]="'account_balance_wallet'" [size]="20"></app-icon>
            <span>Financial Summary</span>
          </div>
          <div class="card-actions">
            <app-button [text]="'View Details'" [color]="'primary'" class="view-details-btn"></app-button>
          </div>
        </div>
        
        <div class="card-content">
          <div class="financial-metrics">
            <div 
              *ngFor="let metric of financialMetrics" 
              class="financial-metric">
              
              <div class="metric-header">
                <span class="metric-label">{{ metric.label }}</span>
                <div class="metric-trend" [class.negative]="metric.trend < 0">
                  <app-icon 
                    [fontIcon]="metric.trend >= 0 ? 'arrow_upward' : 'arrow_downward'" 
                    [size]="12">
                  </app-icon>
                  <span>{{ metric.trend > 0 ? '+' : '' }}{{ metric.trend }}%</span>
                </div>
    </div>
    
              <div class="metric-value" [style.color]="metric.color">
                {{ metric.currency }}{{ formatCurrency(metric.value).replace('â‚¹', '') }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="content-right">
      <!-- Department Distribution -->
      <div class="dashboard-card department-card">
        <div class="card-header">
          <div class="card-title">
            <app-icon [fontIcon]="'pie_chart'" [size]="20"></app-icon>
            <span>Department Distribution</span>
          </div>
        </div>
        
        <div class="card-content">
          @if(isBrowser) {
            <highcharts-chart
              [Highcharts]="Highcharts"
              [options]="departmentChartOptions"
              class="chart-container">
            </highcharts-chart>
          } @else {
            <div class="chart-placeholder">
              <app-icon [fontIcon]="'donut_small'" [size]="48"></app-icon>
              <span>Loading department chart...</span>
            </div>
          }
        </div>
      </div>

      <!-- Department Overview -->
      <div class="dashboard-card departments-overview-card">
        <div class="card-header">
          <div class="card-title">
            <app-icon [fontIcon]="'business'" [size]="20"></app-icon>
            <span>Department Performance</span>
          </div>
          <div class="card-actions">
            <app-button [text]="'View All'" [color]="'accent'" class="view-all-btn"></app-button>
          </div>
        </div>
        
        <div class="card-content">
          <div class="departments-list">
            <div 
              *ngFor="let dept of departments" 
              class="department-item"
              (click)="viewDepartmentDetails(dept)">
              
              <div class="department-info">
                <div class="department-name">{{ dept.name }}</div>
                <div class="department-head">{{ dept.head }}</div>
              </div>
              
              <div class="department-stats">
                <div class="stat-group">
                  <span class="stat-label">Staff:</span>
                  <span class="stat-value">{{ dept.staff }}</span>
                </div>
                <div class="stat-group">
                  <span class="stat-label">Patients:</span>
                  <span class="stat-value">{{ dept.patients }}</span>
                </div>
                <div class="stat-group">
                  <span class="stat-label">Occupancy:</span>
                  <span class="stat-value">{{ dept.occupancy }}%</span>
                </div>
              </div>
              
              <div class="department-revenue">
                <span class="revenue-label">Revenue</span>
                <span class="revenue-value">{{ formatCurrency(dept.revenue) }}</span>
              </div>
              
              <div class="department-status">
                <div 
                  class="status-indicator" 
                  [style.background-color]="getDepartmentStatusColor(dept.status)">
                </div>
                <span class="status-text">{{ dept.status | titlecase }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Recent Activities -->
      <div class="dashboard-card activities-card">
        <div class="card-header">
          <div class="card-title">
            <app-icon [fontIcon]="'history'" [size]="20"></app-icon>
            <span>Recent Activities</span>
          </div>
          <div class="card-actions">
            <app-button 
              [text]="'View All'" 
              [color]="'accent'" 
              (btnClick)="viewAllActivities()"
              class="view-all-btn">
            </app-button>
          </div>
        </div>
        
        <div class="card-content">
          <div class="activities-list">
            <div 
              *ngFor="let activity of recentActivities" 
              class="activity-item">
              
              <div class="activity-icon" [style.color]="getActivityColor(activity.priority)">
                <app-icon [fontIcon]="getActivityIcon(activity.type)" [size]="16"></app-icon>
              </div>
              
              <div class="activity-content">
                <div class="activity-title">{{ activity.title }}</div>
                <div class="activity-description">{{ activity.description }}</div>
                <div class="activity-time">{{ activity.time }}</div>
              </div>
              
              <div class="activity-priority">
                <div 
                  class="priority-indicator" 
                  [class]="'priority-' + activity.priority">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- Staff Management Tab -->
    <div class="tab-panel" *ngIf="isStaffTab()">
      <div class="tab-content-placeholder">
        <div class="placeholder-card">
          <app-icon [fontIcon]="'groups'" [size]="64"></app-icon>
          <h2>Staff Management</h2>
          <p>Manage hospital staff, roles, and assignments</p>
          <app-button 
            [text]="'Go to Staff Management'" 
            [color]="'primary'"
            (btnClick)="navigateToStaffManagement()"
            class="navigate-btn">
          </app-button>
        </div>
      </div>
    </div>

    <!-- Patient Records Tab -->
    <div class="tab-panel" *ngIf="isPatientsTab()">
      <div class="tab-content-placeholder">
        <div class="placeholder-card">
          <app-icon [fontIcon]="'folder_shared'" [size]="64"></app-icon>
          <h2>Patient Records</h2>
          <p>Access and manage patient medical records</p>
          <app-button 
            [text]="'Go to Patient Records'" 
            [color]="'primary'"
            (btnClick)="navigateToPatients()"
            class="navigate-btn">
          </app-button>
        </div>
      </div>
    </div>

    <!-- Billing & Finance Tab -->
    <div class="tab-panel" *ngIf="isBillingTab()">
      <div class="tab-content-placeholder">
        <div class="placeholder-card">
          <app-icon [fontIcon]="'account_balance'" [size]="64"></app-icon>
          <h2>Billing & Finance</h2>
          <p>Manage billing, payments, and financial reports</p>
          <app-button 
            [text]="'Go to Billing'" 
            [color]="'primary'"
            (btnClick)="navigateToBilling()"
            class="navigate-btn">
          </app-button>
        </div>
      </div>
    </div>

    <!-- Analytics & Reports Tab -->
    <div class="tab-panel" *ngIf="isAnalyticsTab()">
      <div class="tab-content-placeholder">
        <div class="placeholder-card">
          <app-icon [fontIcon]="'analytics'" [size]="64"></app-icon>
          <h2>Analytics & Reports</h2>
          <p>View detailed analytics and generate reports</p>
          <app-button 
            [text]="'Go to Analytics'" 
            [color]="'primary'"
            (btnClick)="navigateToReports()"
            class="navigate-btn">
          </app-button>
        </div>
      </div>
    </div>
  </div>
</div> 