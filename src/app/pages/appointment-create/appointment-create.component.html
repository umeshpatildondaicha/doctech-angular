<div class="appointment-create-dialog" [class.view-mode]="isViewMode">
  <!-- Dialog Header -->
  <div class="dialog-header">
    <div class="header-content">
      <div class="title-section">
        <app-icon [fontIcon]="'event'" class="title-icon"></app-icon>
        <h2 class="title">{{ mode | titlecase }} Appointment</h2>
      </div>
      <app-icon [fontIcon]="'close'" (iconClick)="onCancel()"></app-icon>
    </div>
  </div>

  <!-- Dialog Content -->
  <div class="dialog-content">
    <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()" class="form">
      <div class="section-title-wrapper"><h4 class="section-title">Appointment Details</h4></div>
      <div class="form-row">
          <app-selectbox label="Patient" formControlName="patient_id" [options]="patientOptions" placeholder="Select patient" [required]="true" [displayExpr]="'label'"></app-selectbox>
        </div>
      <div class="form-row">
        <!-- <app-date-picker label="Appointment Date & Time" formControlName="appointment_date_time" placeholder="Select date and time" [required]="true"></app-date-picker> -->
        <app-calendar 
          class="calendar-container" 
          [showNavigation]="true" 
          [showToday]="true"
          [events]="calendarEvents"
          (dateSelected)="onDateSelected($event)"
          (eventClicked)="onEventClicked($event)">
        </app-calendar>
      </div>
      <div class="form-row">
        <app-input class="notes-input" [rows]="3" [multiline]="true" label="Notes" formControlName="notes" placeholder="Enter appointment notes"></app-input>
      </div>
    </form>
  </div>

  <!-- Dialog Footer -->
  <div class="dialog-footer">
    <div class="footer-actions">
      <app-button
        type="button"
        *ngIf="!isViewMode"
        appearance="basic"
        (btnClick)="onCancel()"
        [text]="'Cancel'"
        class="cancel-btn">
      </app-button>
      <app-button
        type="button"
        [appearance]="isViewMode ? 'basic' : 'raised'"
        [disabled]="appointmentForm.invalid && !isViewMode"
        (btnClick)="onSubmit()"
        [text]="submitButtonText"
        class="submit-btn">
      </app-button>
    </div>
  </div>
</div> 