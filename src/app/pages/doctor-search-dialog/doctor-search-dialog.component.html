<div class="doctor-search-dialog">
  <!-- Dialog Header -->
  <div class="dialog-header">
    <div class="header-content">
      <div class="title-section">
        <app-icon fontIcon="person_search" class="title-icon"></app-icon>
        <h2 class="title">Refer Patient to Doctor</h2>
      </div>
      <app-icon fontIcon="close" (iconClick)="onCancel()" class="close-icon"></app-icon>
    </div>
    <div class="patient-info">
      <span class="patient-label">Patient:</span>
      <span class="patient-name">{{ data.patientName }}</span>
    </div>
  </div>

  <!-- Scrollable Content Area -->
  <div class="dialog-content">

  <!-- Search Results -->
  <div class="results-section">
    <div class="results-header">
      <h3 class="results-title">
        Available Doctors
        <span class="results-count">({{ searchResults.length }} doctors)</span>
      </h3>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-state">
      <mat-spinner diameter="40"></mat-spinner>
      <p>Searching doctors...</p>
    </div>

    <!-- No Results -->
    <div *ngIf="!isLoading && searchResults.length === 0" class="no-results">
      <app-icon fontIcon="search_off" [size]="48" class="no-results-icon"></app-icon>
      <h3>No doctors found</h3>
      <p>Try adjusting your search criteria or filters.</p>
    </div>

    <!-- Results Grid -->
    <div *ngIf="!isLoading && searchResults.length > 0" class="doctors-grid-container">
      <app-grid
        [rowData]="searchResults"
        [columnDefs]="columnDefs"
        [gridOptions]="gridOptions"
        [showHeader]="true"
        [height]="'400px'"
        [searchPlaceholder]="'Search doctors...'"
        (rowClicked)="selectDoctor($event)"
        (searchChange)="onGridSearch($event)">
      </app-grid>
    </div>
  </div>
  </div>

  <!-- Dialog Footer -->
  <div class="dialog-footer">
    <div class="footer-actions">
      <app-button
        appearance="stroked"
        color="primary"
        (btnClick)="onCancel()"
        class="cancel-btn">
        <span>Cancel</span>
      </app-button>
      
      <app-button
        appearance="raised"
        color="primary"
        [disabled]="!selectedDoctor"
        (btnClick)="onReferPatient()"
        class="refer-btn">
        <app-icon fontIcon="person_add" [size]="16"></app-icon>
        <span>{{ selectedDoctor ? 'Refer Patient' : 'Select Doctor First' }}</span>
      </app-button>
    </div>
  </div>
</div>
