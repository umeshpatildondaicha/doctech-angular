<div class="container">
    <div class="header">
        <div class="title">{{title}}</div>
        <div class="info">
            Displaying {{filteredData.length}} of {{data.length}} items
            <span class="last-updated">Last updated: {{lastUpdated}}</span>
        </div>
        <div class="actions">
            <button *ngIf="showExport" class="action-btn" (click)="exportData()">
                <i class="fas fa-download"></i>
            </button>
            <button *ngIf="showRefresh" class="action-btn" (click)="refreshData()">
                <i class="fas fa-sync"></i>
            </button>
            <button class="action-btn" [class.active]="viewMode === 'list'" (click)="toggleView('list')">
                <i class="fas fa-list"></i>
            </button>
            <button class="action-btn" [class.active]="viewMode === 'grid'" (click)="toggleView('grid')">
                <i class="fas fa-th"></i>
            </button>
            <button class="action-btn" (click)="openTableModifier()">
                <i class="fas fa-table"></i>
            </button>
        </div>
    </div>

    <div class="filters" *ngIf="showSearch">
        <div class="search-box">
            <input type="text" [(ngModel)]="searchText" (ngModelChange)="onSearch()" placeholder="Search...">
        </div>
    </div>

    <div [ngClass]="{'table-view': viewMode === 'list', 'grid-view': viewMode === 'grid'}">
        <table *ngIf="viewMode === 'list'">
            <thead>
                <tr class="table-header">
                    <th *ngIf="showCheckbox">
                        <input type="checkbox" (change)="handleSelectAll($any($event.target).checked)">
                    </th>
                    <th *ngFor="let column of columns" [style.width]="column.width">
                        {{column.headerName}}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of paginatedData" (click)="handleRowClick(row)">
                    <td *ngIf="showCheckbox">
                        <input type="checkbox" [checked]="selectedItems.includes(row)" 
                               (change)="handleSelectRow(row, $any($event.target).checked)">
                    </td>
                    <td *ngFor="let column of columns">
                        {{getCellValue(row, column)}}
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="grid-container" *ngIf="viewMode === 'grid'">
            <div class="grid-item" *ngFor="let row of paginatedData" (click)="handleRowClick(row)">
                <div class="card">
                    <div *ngFor="let column of columns" class="card-field">
                        <span class="field-label">{{column.headerName}}:</span>
                        <span class="field-value">{{getCellValue(row, column)}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="pagination" *ngIf="showPagination">
        <div class="items-per-page">
            Items per page:
            <select [(ngModel)]="itemsPerPage" (change)="currentPage = 1">
                <option>5</option>
                <option>10</option>
                <option>20</option>
                <option>50</option>
            </select>
        </div>
        <div class="page-navigation">
            <button [disabled]="currentPage === 1" (click)="onPageChange(currentPage - 1)">Previous</button>
            <span>Page {{currentPage}} of {{totalPages}}</span>
            <button [disabled]="currentPage === totalPages" (click)="onPageChange(currentPage + 1)">Next</button>
        </div>
    </div>
</div> 