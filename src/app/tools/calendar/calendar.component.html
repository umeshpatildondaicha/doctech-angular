<div class="calendar-container">
  <!-- Calendar Header -->
  <div class="calendar-header">
    <div class="header-content">
      <div class="month-year">
        <h2 class="month-year-text">{{ getMonthYearString() }}</h2>
      </div>
      
      <div class="navigation-controls">
        <app-button
          type="button"
          appearance="icon"
          (btnClick)="previousMonth()"
          class="nav-btn"
          [text]="''"
          [fontIcon]="'chevron_left'">
        </app-button>
        
        <app-button
          type="button"
          appearance="basic"
          (btnClick)="onTodayClick()"
          class="today-btn"
          [text]="'Today'">
        </app-button>
        
        <app-button
          type="button"
          appearance="icon"
          (btnClick)="nextMonth()"
          class="nav-btn"
          [text]="''"
          [fontIcon]="'chevron_right'">
        </app-button>
      </div>
    </div>
  </div>

  <!-- Calendar Legend -->
  <div class="calendar-legend" *ngIf="showEventIndicators">
    <div class="legend-item">
      <div class="legend-dot available"></div>
      <span class="legend-text">Available</span>
    </div>
    <div class="legend-item">
      <div class="legend-dot appointment"></div>
      <span class="legend-text">Booked</span>
    </div>
  </div>

  <!-- Calendar and Events Container -->
  <div class="calendar-events-container">
    <!-- Calendar Grid -->
    <div class="calendar-grid">
      <!-- Week Days Header -->
      <div class="week-header">
        <div class="week-day" *ngFor="let day of weekDays">{{ day }}</div>
      </div>

      <!-- Calendar Days -->
      <div class="calendar-body">
        <div class="calendar-week" *ngFor="let week of calendar">
          <div 
            class="calendar-day"
            *ngFor="let date of week"
            [class.today]="isToday(date)"
            [class.selected]="isSelected(date)"
            [class.other-month]="!isCurrentMonth(date)"
            [class.clickable]="allowDateSelection"
            (click)="allowDateSelection ? onDateSelected({date: date}) : null">
            
            <div class="day-number">{{ date.getDate() }}</div>
            
            <!-- Event Indicators -->
            <div 
              class="event-indicators" 
              *ngIf="showEventIndicators && getEventsForDate(date).length > 0">
              <div 
                class="event-dot"
                *ngFor="let event of getEventsForDate(date).slice(0, 3)"
                [class]="'event-dot ' + (event.type || 'other')"
                [style.background-color]="getEventColor(event).primary">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Events Panel (Right Side) -->
    <div class="events-panel" *ngIf="getEventsForDate(selectedDate).length > 0">
      <div class="date-header">
        <h3 class="date-title">{{ formatSelectedDate() }}</h3>
      </div>
      

      <div class="events-panel-wrapper">
        <div class="event-item" 
        *ngFor="let event of getEventsForDate(selectedDate)"
        (click)="onEventClicked({event: {meta: {originalEvent: event}}})"
        [style.border-left-color]="getEventColor(event).primary">
     <div class="event-content">
       <div class="event-title">{{ event.title }}</div>
       <div class="event-description" *ngIf="event.description">{{ event.description }}</div>
       <div class="event-time">
         <span *ngIf="event.allDay">All-day</span>
         <span *ngIf="!event.allDay">{{ formatEventTime(event) }}</span>
       </div>
     </div>
   </div>
      </div>
    </div>

    <!-- No Events Message (Right Side) -->
    <div class="no-events-panel" *ngIf="getEventsForDate(selectedDate).length === 0">
      <p>No events for {{ formatSelectedDate() }}</p>
    </div>
  </div>

  <!-- Events List (Bottom - Mobile/Compact) -->
  <div class="events-list-bottom" *ngIf="getEventsForDate(selectedDate).length > 0">
    <div class="date-header">
      <h3 class="date-title">{{ formatSelectedDate() }}</h3>
    </div>
    
    <div class="event-item" 
         *ngFor="let event of getEventsForDate(selectedDate)"
         (click)="onEventClicked({event: {meta: {originalEvent: event}}})"
         [style.border-left-color]="getEventColor(event).primary">
      <div class="event-content">
        <div class="event-title">{{ event.title }}</div>
        <div class="event-description" *ngIf="event.description">{{ event.description }}</div>
        <div class="event-time">
          <span *ngIf="event.allDay">All-day</span>
          <span *ngIf="!event.allDay">{{ formatEventTime(event) }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- No Events Message (Bottom) -->
  <div class="no-events-bottom" *ngIf="getEventsForDate(selectedDate).length === 0">
    <p>No events for {{ formatSelectedDate() }}</p>
  </div>
</div> 